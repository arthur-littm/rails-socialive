<!-- <div id="countdown">
  <div id='tiles'></div>
  <div class="labels">
    <li>Days</li>
    <li>Hours</li>
    <li>Mins</li>
    <li>Secs</li>
  </div>
</div> -->

<ul id="countdown">
  <li id="days">
    <div class="number">00</div>
    <div class="labelcount">Days</div>
  </li>
  <li id="hours">
    <div class="number">00</div>
    <div class="labelcount">Hours</div>
  </li>
  <li id="minutes">
    <div class="number">00</div>
    <div class="labelcount">Minutes</div>
  </li>
  <li id="seconds">
    <div class="number">00</div>
    <div class="labelcount">Seconds</div>
  </li>
</ul>

<script>

/* --------------------------
 * GLOBAL VARS
 * -------------------------- */
// The date you want to count down to
var targetDate = new Date("<%= @livestream.hour_of_stream %>");

// Other date related variables
var days;
var hrs;
var min;
var sec;

/* --------------------------
 * ON DOCUMENT LOAD
 * -------------------------- */
$(function() {
   // Calculate time until launch date
   timeToLaunch();
  // Transition the current countdown from 0
  numberTransition('#days .number', days, 1000, 'easeOutQuad');
  numberTransition('#hours .number', hrs, 1000, 'easeOutQuad');
  numberTransition('#minutes .number', min, 1000, 'easeOutQuad');
  numberTransition('#seconds .number', sec, 1000, 'easeOutQuad');
  // Begin Countdown
  setTimeout(countDownTimer,1001);
});

/* --------------------------
 * FIGURE OUT THE AMOUNT OF
   TIME LEFT BEFORE LAUNCH
 * -------------------------- */
function timeToLaunch(){
    // Get the current date
    var currentDate = new Date();

    // Find the difference between dates
    var diff = (currentDate - targetDate)/1000;
    var diff = Math.abs(Math.floor(diff));

    // Check number of days until target
    days = Math.floor(diff/(24*60*60));
    sec = diff - days * 24*60*60;

    // Check number of hours until target
    hrs = Math.floor(sec/(60*60));
    sec = sec - hrs * 60*60;

    // Check number of minutes until target
    min = Math.floor(sec/(60));
    sec = sec - min * 60;
}

/* --------------------------
 * DISPLAY THE CURRENT
   COUNT TO LAUNCH
 * -------------------------- */
function countDownTimer(){

    // Figure out the time to launch
    timeToLaunch();

    // Write to countdown component
    $( "#days .number" ).text(days);
    $( "#hours .number" ).text(hrs);
    $( "#minutes .number" ).text(min);
    $( "#seconds .number" ).text(sec);

    // Repeat the check every second
    setTimeout(countDownTimer,1000);
}

/* --------------------------
 * TRANSITION NUMBERS FROM 0
   TO CURRENT TIME UNTIL LAUNCH
 * -------------------------- */
function numberTransition(id, endPoint, transitionDuration, transitionEase){
  // Transition numbers from 0 to the final number
  $({numberCount: $(id).text()}).animate({numberCount: endPoint}, {
      duration: transitionDuration,
      easing:transitionEase,
      step: function() {
        $(id).text(Math.floor(this.numberCount));
      },
      complete: function() {
        $(id).text(this.numberCount);
      }
   });
};

// var target_date = new Date("<%# @livestream.hour_of_stream%>"); // set the countdown date
// console.log(target_date);
// var days, hours, minutes, seconds; // variables for time units

// var countdown = document.getElementById("tiles"); // get tag element

// getCountdown();

// setInterval(function () { getCountdown(); }, 1000);

// function getCountdown(){

//   // find the amount of "seconds" between now and target
//   var current_date = new Date();
//   console.log(current_date);
//   var seconds_left = (target_date.getTime() - current_date.getTime()) / 1000;

//   days = pad( Math.max(0, parseInt(seconds_left / 86400) || 0));
//   seconds_left = seconds_left % 86400;

//   hours = pad( Math.max(0, parseInt(seconds_left / 3600) || 0));
//   seconds_left = seconds_left % 3600;

//   minutes = pad( Math.max(0, parseInt(seconds_left / 60) || 0));
//   seconds = pad( Math.max(0, parseInt( seconds_left % 60) || 0));

//   // format countdown string + set tag value
//   countdown.innerHTML = "<span>" + days + "</span><span>" + hours + "</span><span>" + minutes + "</span><span>" + seconds + "</span>";

// }



// function pad(n) {
//   return (n < 10 ? '0' : '') + n;
// }
</script>
